<div id="page-title">
  <h2>Token Report</h2>
  </div>

 <form [formGroup]="tokenForm">
  <div fxLayout="row wrap">
  <div fxFlex.gt-sm="13" fxFlex="100">
    <mat-form-field class="w100 pad-rgt">
      <mat-select placeholder="Select" formControlName="dateRange">
        <mat-option [value]="range.id" *ngFor="let range of DateType">{{range.type}}</mat-option>
      </mat-select>
      <mat-error *ngIf="tokenForm.controls.dateRange.errors?.required">
        Select field is required
      </mat-error>
    </mat-form-field>
  </div>

  <div fxFlex.gt-sm="13" fxFlex="100">
    <mat-form-field  class="w100 pad-rgt">
      <input matInput [matDatepicker]="picker1" formControlName="fromDate" placeholder="From date"
      [min]="startDate" [max]="tokenForm.value.toDate ? tokenForm.value.toDate : endDate" required>
      <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
      <mat-datepicker #picker1></mat-datepicker>
    </mat-form-field>
  </div>

  <div fxFlex.gt-sm="13" fxFlex="100">
    <mat-form-field  class="w100 pad-rgt">
      <input matInput [matDatepicker]="picker2" formControlName="toDate" placeholder="To date"
      [min]="tokenForm.value.fromDate ? tokenForm.value.fromDate : startDate"
      [max]="endDate" required>
      <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
      <mat-datepicker #picker2></mat-datepicker>
    </mat-form-field>
  </div>

  <div fxFlex.gt-sm="13" fxFlex="100">

    <mat-form-field class="w100 pad-rgt">
      <mat-select placeholder="Select Floor" formControlName="floor" (selectionChange)="loadDepartments($event.value)" multiple>
        <mat-option #allFloorSelected [value]="0">All</mat-option>
        <mat-option [value]="floor.floorId" *ngFor="let floor of levellist">{{floor.floorName}}</mat-option>
      </mat-select>
      <mat-error *ngIf="tokenForm.controls.floor.errors?.required">
        Select Floor is required
      </mat-error>
    </mat-form-field>

  </div>

  <div fxFlex.gt-sm="13" fxFlex="100">

    <mat-form-field class="w100 pad-rgt">
      <mat-select placeholder="Select Dept" formControlName="department" (selectionChange)="loadServices($event.value)" multiple>
        <mat-option #allDepartmentSelected [value]="0">All</mat-option>
        <mat-option [value]="department.deptId" *ngFor="let department of departmentlist">{{department.deptName}}</mat-option>
      </mat-select>
      <mat-error *ngIf="tokenForm.controls.department.errors?.required">
        Select Department is required
      </mat-error>
    </mat-form-field>

  </div>

  <div fxFlex.gt-sm="13" fxFlex="100">
    <mat-form-field class="w100 pad-rgt">
      <mat-select placeholder="Select Service" formControlName="service" multiple>
        <mat-option #allServiceSelected [value]="0">All</mat-option>
        <mat-option [value]="service.serviceId" *ngFor="let service of servicelist">{{service.serviceName}}</mat-option>
      </mat-select>
      <mat-error *ngIf="tokenForm.controls.service.errors?.required">
        Select Service is required
      </mat-error>
    </mat-form-field>

  </div>

  <div fxFlex.gt-sm="13" fxFlex="100">

              <mat-form-field class="w100 pad-rgt">
               <input matInput formControlName="tokennumber" placeholder="Token Number"/>
               <mat-error *ngIf="tokenForm.controls.tokennumber.errors?.required">
                Token Number is required
              </mat-error>
              </mat-form-field>

  </div>



  <div fxFlex.gt-sm="25" fxFlex="100">
    <button mat-raised-button color="primary" (click)="getReports()" [disabled]="tokenForm.invalid">{{'ActionNames.submit' | translate}}</button> &nbsp;
    <button  mat-raised-button type="reset" (click)="clearAllFields()">{{'ActionNames.clear' | translate}}</button>
  </div>

  <!-- <div fxFlex.gt-sm="13" fxFlex="100">
  <div class="clearfix mar-btm">
    <div class="pull-left">
      <button class="btn pull-right btn-yellow" [matMenuTriggerFor]="SearchGrid"
        *ngIf="reportsList.length>0 && false">{{'EmpPerformanceModule.manage.export' | translate}}
        <i class="ti-angle-down"></i>
      </button> &nbsp;
      <mat-menu #SearchGrid="matMenu">

        <button mat-menu-item (click)="ExportTOExcel()">
          <i class="ti-file"></i> {{'EmpPerformanceModule.manage.excel' | translate}}</button>
        <button mat-menu-item (click)="ExportTOCsv()">
          <i class="ti-file"></i> {{'EmpPerformanceModule.manage.csv' | translate}}</button>
      </mat-menu>
    </div>


  </div>
 </div> -->

</div>
</form>
<br>

<div class="mat-elevation-z8" *ngIf="reportsList.length">
  <h4 class="title pad-lft pad-top">From date: {{fromDate}} To date: {{toDate}}</h4>
        <mat-table #table [dataSource]="dataSource" matSort (matSortChange)="sortData()">

    
            <ng-container matColumnDef="tokenNo">
              <mat-header-cell *matHeaderCellDef mat-sort-header class="pad-all">Token No</mat-header-cell>
              <mat-cell *matCellDef="let element" class="pad-all"> {{element.tokenNo}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="mrnNo">
              <mat-header-cell *matHeaderCellDef mat-sort-header class="pad-all"> MRN No </mat-header-cell>
              <mat-cell *matCellDef="let element" class="pad-all"> {{element.mrnNo}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="patientName">
              <mat-header-cell *matHeaderCellDef mat-sort-header class="pad-all"> Patient Name </mat-header-cell>
              <mat-cell *matCellDef="let element" class="pad-all"> {{element.patientName}}</mat-cell>
            </ng-container>

            <ng-container matColumnDef="appointmentTime" >
              <mat-header-cell *matHeaderCellDef mat-sort-header class="pad-all"> Appointment Time</mat-header-cell>
              <mat-cell *matCellDef="let element" class="pad-all"> {{element.appointmentTime}}</mat-cell>
            </ng-container>

            <ng-container matColumnDef="checkinTime" >
                <mat-header-cell *matHeaderCellDef mat-sort-header class="pad-all"> Check-in Time</mat-header-cell>
                <mat-cell *matCellDef="let element" class="pad-all"> {{element.checkinTime}}</mat-cell>
              </ng-container>

              <ng-container matColumnDef="checkinMode" >
                  <mat-header-cell *matHeaderCellDef mat-sort-header class="pad-all"> Check-in Mode </mat-header-cell>
                  <mat-cell *matCellDef="let element" class="pad-all"> {{element.checkinMode}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="department" >
                  <mat-header-cell *matHeaderCellDef mat-sort-header class="pad-all"> Department </mat-header-cell>
                  <mat-cell *matCellDef="let element" class="pad-all"> {{element.department}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="service" >
                  <mat-header-cell *matHeaderCellDef mat-sort-header class="pad-all"> Service </mat-header-cell>
                  <mat-cell *matCellDef="let element" class="pad-all"> {{element.service}} </mat-cell>
                </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
          </mat-table>
          <div *ngIf="reportsList.length > pageSize" style="width: 100%">
            <mat-paginator [length]="reportsList.length" [pageSize]="pageSize" [pageIndex]="listPage" showFirstLastButtons
              (page)="getListData($event)">
            </mat-paginator>
          </div>


        </div> 
      <!-- <div *ngIf="gridLoad"><span>{{'EmpPerformanceModule.manage.noData' | translate}}</span></div>
        <div class="fullloader" *ngIf="loading">
          <div class="fullloaderInner">
            <img src="assets/images/loading.gif">
          </div>
        </div> -->
