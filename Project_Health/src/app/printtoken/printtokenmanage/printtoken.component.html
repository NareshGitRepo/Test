<div id="page-title" style="padding-left:0;" class="scroll-top">

  <div fxFlex="100">
    <h2 class="wrap-word">{{'PrintTokenModule.printertokenmanage.title' | translate}}</h2>
  </div>
</div>
<form [formGroup]="printTokenForm ">
  <div fxLayout="row wrap">
    <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100">
      <div class="mar-btm">

        <mat-form-field class="mar-rgt">
          <input cdkFocusInitial matInput placeholder="{{'PrintTokenModule.printertokenmanage.mrnNumber' | translate}}" allow-number-nospace formControlName="mrnNumber" minlength="3" maxlength="10">
          <mat-error *ngIf="printTokenForm.controls.mrnNumber.errors?.required">{{'ActionNames.errorMessage' | translate}}</mat-error>
          <mat-error *ngIf="printTokenForm.get('mrnNumber').hasError('minlength')"> {{'ActionNames.minLengthError3' | translate}}</mat-error>
        </mat-form-field>
       

        <button class="btn btn-primary"   [disabled]="!printTokenForm.valid" (click)="getprintTokens()"
         >{{'ActionNames.submit' | translate}}</button> &nbsp;
        <button class="btn btn-dark" type="reset" (click)="clearTokens()">{{'ActionNames.clear' | translate}}</button>

      </div>
    </div>

    </div>

 </form>
<div *ngIf="dataFlag" class="no-recrds">{{'ActionNames.noRecords' | translate}}</div>

<div *ngIf="dataSourceList">
 <div align="right">
  <mat-form-field class="w20">
    <mat-select  placeholder="{{'ManualTokenModule.manualtokenmanage.selectPrinter' | translate}}" 
    [(ngModel)]="PrinterId" required>
        <mat-option *ngFor="let printd of PrinterData" [value]="printd?.printId">{{printd?.printerName}}</mat-option>
    </mat-select>
  </mat-form-field>
 </div>
 <div class="table-responsive">
  <table mat-table #table [dataSource]="dataSource" class="table wrap-word">

    <ng-container matColumnDef="mrnNo">
      <th mat-header-cell *matHeaderCellDef>{{'PrintTokenModule.printertokenmanage.mrnNumber' | translate}}</th>
      <td mat-cell *matCellDef="let element">{{element.mrnNo}}</td>
    </ng-container>
  
      <ng-container matColumnDef="tokenNo">
        <th mat-header-cell *matHeaderCellDef>{{'PrintTokenModule.printertokenmanage.tokenNo' | translate}}</th>
        <td mat-cell *matCellDef="let element"> {{element.tokenNo}} </td>
      </ng-container>
  
      <ng-container matColumnDef="apptDate">
        <th mat-header-cell *matHeaderCellDef> {{'PrintTokenModule.printertokenmanage.apptDate' | translate}}</th>
        <td mat-cell *matCellDef="let element"> {{element.apptDate}} </td>
      </ng-container>
  
      <ng-container matColumnDef="doctorname">
        <th mat-header-cell *matHeaderCellDef> {{'PrintTokenModule.printertokenmanage.doctorName' | translate}}</th>
        <td mat-cell *matCellDef="let element"> {{element.doctorname}} </td>
      </ng-container>

      <ng-container matColumnDef="patientName">
      <th mat-header-cell *matHeaderCellDef>{{'PrintTokenModule.printertokenmanage.patientName' | translate}} </th>
      <td mat-cell *matCellDef="let element"> {{element.patientName}} </td>
    </ng-container>

    <ng-container matColumnDef="serviceEngName">
      <th mat-header-cell *matHeaderCellDef> {{'PrintTokenModule.printertokenmanage.serviceName' | translate}}</th>
      <td mat-cell *matCellDef="let element"> {{element.serviceEngName}} </td>
    </ng-container>

     <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef> {{'PrintTokenModule.printertokenmanage.action' | translate}} </th>
        <td mat-cell *matCellDef="let row"><button mat-raised-button color="primary" (click)="print(row)"><i class="ti-printer"></i>&nbsp; 
          {{'PrintTokenModule.printertokenmanage.print' | translate}}</button> </td>
      </ng-container>

        
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; let i = index; columns: displayedColumns;"></tr>
    </table>
  </div>
</div> 



 <div *ngIf=" tokensList && tokensList.length>pageSize && !listflag">
  <mat-paginator [length]="tokensList.length" [pageSize]="pageSize" [pageIndex]="initPage" showFirstLastButtons
    (page)="geListData($event)">
  </mat-paginator>
</div>



<div class="fullloader" *ngIf="loading">
  <div class="fullloaderInner">
    <img src="assets/images/loading.gif">
  </div>
</div>